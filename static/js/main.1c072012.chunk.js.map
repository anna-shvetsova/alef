{"version":3,"sources":["reducer.js","store.js","actions.js","restrictions.js","components/input-field.js","components/child-row.js","components/children-div.js","components/parent-div.js","components/form-page.js","components/preview-page.js","components/app.js","index.js"],"names":["addChild","state","id","name","age","form","children","updateChild","field","value","idx","findIndex","el","child","updatedChild","slice","removeChild","updateParent","updatedParent","parent","saveForm","arr","preview","getExcerpt","num","res","trim","parseInt","getYears","map","reducer","action","curTabIndex","type","payload","store","createStore","changeTabIndex","fieldTypes","label","errorText","validate","val","length","toString","InputField","fieldType","dispatch","useDispatch","useState","error","setError","helperText","setHelperText","onFieldChange","useCallback","event","target","isOK","TextField","variant","size","onChange","margin","memo","ChildRow","onRemoveClick","Grid","container","direction","justifyContent","Button","onClick","ChildrenDiv","btnVisible","setBtnVisible","useSelector","useEffect","onAddChild","Date","now","Box","pt","pb","alignItems","Typography","component","sx","fontWeight","ParentDiv","FormPage","btnDisabled","setBtnDisabled","every","isFormOk","onSaveButton","disabled","color","PreviewPage","App","onTabChange","newTabIndex","AppBar","position","Tabs","centered","Tab","index","TabPanel","hidden","ReactDOM","render","CssBaseline","Container","maxWidth","document","getElementById"],"mappings":"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","file":"static/js/main.1c072012.chunk.js","sourcesContent":["const reducer = (state, action) => {\r\n\r\n    const initialState = {\r\n        curTabIndex: 0,\r\n        form: {\r\n            parent: {\r\n                name: '',\r\n                age: ''\r\n            },\r\n            children: []\r\n        },\r\n        preview: {\r\n            parent: '',\r\n            children: []\r\n        }\r\n    }\r\n\r\n    if (!state) return initialState;\r\n\r\n    switch (action.type) {\r\n        case 'ADD_CHILD':\r\n            return addChild(state, action.payload);\r\n        case 'UPDATE_CHILD':\r\n            return updateChild(state, action.payload);\r\n        case 'REMOVE_CHILD':\r\n            return removeChild(state, action.payload);\r\n        case 'UPDATE_PARENT':\r\n            return updateParent(state, action.payload);\r\n        case 'SAVE_FORM':\r\n            return saveForm(state);\r\n        case 'CHANGE_TAB_INDEX':\r\n            return { ...state, curTabIndex: action.payload };\r\n        default:\r\n            return state\r\n    }\r\n\r\n}\r\n\r\nconst addChild = (state, { id, name, age }) => {\r\n    return {\r\n        ...state,\r\n        form: {\r\n            ...state.form,\r\n            children: [\r\n                ...state.form.children,\r\n                {\r\n                    id,\r\n                    name,\r\n                    age\r\n                }\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\nconst updateChild = (state, { id, field, value }) => {\r\n    if (!id) return state;\r\n    const idx = state.form.children.findIndex(el => el.id === id);\r\n    const child = state.form.children[idx];\r\n    const updatedChild = { ...child };\r\n    updatedChild[field] = value;\r\n    return {\r\n        ...state,\r\n        form: {\r\n            ...state.form,\r\n            children: [\r\n                ...state.form.children.slice(0, idx),\r\n                updatedChild,\r\n                ...state.form.children.slice(idx + 1)\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\nconst removeChild = (state, id) => {\r\n    if (!id) return state;\r\n    const idx = state.form.children.findIndex(el => el.id === id);\r\n    return {\r\n        ...state,\r\n        form: {\r\n            ...state.form,\r\n            children: [\r\n                ...state.form.children.slice(0, idx),\r\n                ...state.form.children.slice(idx + 1)\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\nconst updateParent = (state, { field, value }) => {\r\n    const updatedParent = { ...state.form.parent };\r\n    updatedParent[field] = value;\r\n    return {\r\n        ...state,\r\n        form: {\r\n            ...state.form,\r\n            parent: updatedParent\r\n        }\r\n    }\r\n}\r\n\r\nconst saveForm = (state) => {\r\n    const { form, preview } = state;\r\n\r\n    const getYears = (num) => {\r\n        let res = num.trim();\r\n        switch (parseInt(num.slice(-1))) {\r\n            case 1:\r\n                return `${res} год`;\r\n            case 2: case 3: case 4:\r\n                return `${res} года`;\r\n            default:\r\n                return `${res} лет`;\r\n        }\r\n    };\r\n\r\n    const getExcerpt = ({ name, age }) => {\r\n        return `${name}, ${getYears(age)}`;\r\n    };\r\n\r\n    const getExcerpts = (arr) => {\r\n        return arr.map(el => {\r\n            return {\r\n                id: el.id,\r\n                child: getExcerpt(el)\r\n            }\r\n        });\r\n    };\r\n\r\n    return {\r\n        ...state,\r\n        preview: {\r\n            ...preview,\r\n            parent: getExcerpt(form.parent),\r\n            children: getExcerpts(form.children)\r\n        }\r\n    }\r\n}\r\n\r\nexport default reducer;","import { createStore } from 'redux';\r\nimport reducer from './reducer';\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","const addChild = ({name, age}) => {\r\n    const id = Date.now().toString();\r\n    return {\r\n        type: 'ADD_CHILD',\r\n        payload: {id, name, age}\r\n    }\r\n}\r\n\r\nconst updateChild = ({id, field, value}) => {\r\n    return {\r\n        type: 'UPDATE_CHILD',\r\n        payload: {id, field, value}\r\n    }\r\n}\r\n\r\nconst removeChild = (id) => {\r\n    return {\r\n        type: 'REMOVE_CHILD',\r\n        payload: id\r\n    }\r\n}\r\n\r\nconst updateParent = ({field, value}) => {\r\n    return {\r\n        type: 'UPDATE_PARENT',\r\n        payload: {field, value}\r\n    }\r\n}\r\n\r\nconst saveForm = () => {\r\n    return {\r\n        type: 'SAVE_FORM'\r\n    }\r\n}\r\n\r\nconst changeTabIndex = (idx) => {\r\n    return {\r\n        type: 'CHANGE_TAB_INDEX',\r\n        payload: idx\r\n    }\r\n}\r\n\r\nexport {\r\n    addChild,\r\n    updateChild,\r\n    removeChild,\r\n    updateParent,\r\n    saveForm,\r\n    changeTabIndex\r\n}","const fieldTypes = {\r\n    name: {\r\n        label: 'Имя',\r\n        errorText: 'Имя должно быть задано',\r\n        validate: (val) => val.trim().length > 0\r\n    },\r\n    age: {\r\n        label: 'Возраст',\r\n        errorText: 'Целое число начиная с 0',\r\n        validate: (val) => {\r\n            val = val.trim();\r\n            return parseInt(val).toString().length === val.length && parseInt(val) >= 0\r\n        }\r\n    }\r\n}\r\n\r\nconst isFormOk = (form) => {\r\n    const { parent, children } = form;\r\n    const { name, age } = parent;\r\n\r\n    return fieldTypes.name.validate(name) && fieldTypes.age.validate(age)\r\n        && children.every(el => {\r\n            const { name, age } = el;\r\n            return fieldTypes.name.validate(name) && fieldTypes.age.validate(age)\r\n        });\r\n}\r\n\r\nexport { fieldTypes, isFormOk }","import React, { memo, useCallback, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { TextField } from '@material-ui/core';\r\nimport { fieldTypes } from '../restrictions';\r\n\r\nconst InputField = ({ id, fieldType, value }) => {\r\n    const dispatch = useDispatch();\r\n    const [error, setError] = useState(false);\r\n    const [helperText, setHelperText] = useState('');\r\n\r\n    const onFieldChange = useCallback((event) => {\r\n        const { value } = event.target;\r\n\r\n        const isOK = fieldTypes[fieldType].validate(value);\r\n        setError(!isOK);\r\n        setHelperText(isOK ? '': fieldTypes[fieldType].errorText);\r\n\r\n        if (id === '') {\r\n            dispatch({\r\n                type: 'UPDATE_PARENT',\r\n                payload: { field: fieldType, value: value.trim() }\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: 'UPDATE_CHILD',\r\n                payload: { id, field: fieldType, value: value.trim() }\r\n            });\r\n        }\r\n    }, [dispatch, id, fieldType]);\r\n\r\n    if (!id) { id = '' };\r\n\r\n    return (\r\n        <TextField\r\n            id={`${fieldType}${id}`}\r\n            label={fieldTypes[fieldType].label}\r\n            variant='outlined'\r\n            size='small'\r\n            onChange={onFieldChange}\r\n            value={value}\r\n            error={error}\r\n            helperText={helperText}\r\n            margin='normal'\r\n        />\r\n    )\r\n}\r\n\r\nexport default memo(InputField);","import React, { memo, useCallback } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Grid, Button } from '@material-ui/core';\r\nimport { removeChild } from '../actions';\r\nimport InputField from './input-field';\r\n\r\nconst ChildRow = ({ id, name, age }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const onRemoveClick = useCallback(() => {\r\n        dispatch(removeChild(id));\r\n    }, [dispatch, id]);\r\n\r\n    return (\r\n        <Grid container direction='row' justifyContent='space-between'>\r\n            <InputField id={id} fieldType='name' value={name} />\r\n            <InputField id={id} fieldType='age' value={age} />\r\n            <Button onClick={onRemoveClick}>Удалить</Button>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default memo(ChildRow);","import React, { memo, useState, useEffect, useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Grid, Typography, Box, Button } from '@material-ui/core';\r\nimport { addChild } from '../actions';\r\nimport ChildRow from './child-row';\r\n\r\nconst ChildrenDiv = () => {\r\n    const [btnVisible, setBtnVisible] = useState(true);\r\n    const children = useSelector(state => state.form.children);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        setBtnVisible(children.length < 5);\r\n    }, [children.length]);\r\n\r\n    const onAddChild = useCallback(() => {\r\n        dispatch(addChild({ name: '', age: '' }));\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Box pt={3} pb={0.5}>\r\n            <Grid container direction='row' justifyContent='space-between' alignItems='center'>\r\n                <Typography component='h2'>\r\n                    <Box sx={{ fontWeight: 'bold' }}>Дети (макс. 5)</Box>\r\n                </Typography>\r\n                {btnVisible && <Button onClick={onAddChild}>Добавить ребенка</Button>}\r\n            </Grid>\r\n            {\r\n                children.map(child => {\r\n                    const { id, name, age } = child;\r\n                    return <ChildRow key={id} id={id} name={name} age={age} />\r\n                })\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default memo(ChildrenDiv);","import React, { memo } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Grid, Typography, Box } from '@material-ui/core';\r\nimport InputField from './input-field';\r\n\r\nconst ParentDiv = () => {\r\n    const parent = useSelector(state => state.form.parent);\r\n\r\n    return (\r\n        <Box pt={3} pb={0.5}>\r\n            <Typography component='h2'>\r\n                <Box sx={{ fontWeight: 'bold' }}>Персональные данные</Box>\r\n            </Typography>\r\n            <Grid container direction='column'>\r\n                <InputField fieldType='name' value={parent.name} />\r\n                <InputField fieldType='age' value={parent.age} />\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default memo(ParentDiv);","import React, { Fragment, memo, useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, Box } from '@material-ui/core';\r\nimport { saveForm, changeTabIndex } from '../actions';\r\nimport { isFormOk } from '../restrictions';\r\nimport ChildrenDiv from './children-div';\r\nimport ParentDiv from './parent-div';\r\n\r\nconst FormPage = () => {\r\n    const form = useSelector(state => state.form);\r\n    const [btnDisabled, setBtnDisabled] = useState(true);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(()=>{\r\n        setBtnDisabled(!isFormOk(form));\r\n    }, [form])\r\n\r\n    const onSaveButton = useCallback(() => {\r\n        dispatch(saveForm());\r\n        dispatch(changeTabIndex(1));\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Fragment>\r\n            <ParentDiv />\r\n            <ChildrenDiv />\r\n            <Box pt={3} pb={0.5}>\r\n                <Button disabled={btnDisabled} color='primary' onClick={onSaveButton}>\r\n                    Сохранить\r\n                </Button>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default memo(FormPage);","import React, { Fragment, memo } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Typography, Box } from '@material-ui/core';\r\n\r\nconst PreviewPage = () => {\r\n    const { parent, children } = useSelector(state => state.preview);\r\n\r\n    return (\r\n        <Fragment>\r\n            <Box pt={3} pb={0.5}>\r\n                <Typography component='h2' >\r\n                    <Box sx={{ fontWeight: 'bold' }}>Персональные данные</Box>\r\n                </Typography>\r\n                <Typography component='p'>{parent}</Typography>\r\n            </Box>\r\n            <Box pt={3} pb={0.5}>\r\n                <Typography component='h2'>\r\n                    <Box sx={{ fontWeight: 'bold' }}>Дети</Box>\r\n                </Typography>\r\n                {\r\n                    children.map(el => {\r\n                        const { id, child } = el;\r\n                        return <Typography key={id} component='p'>{child}</Typography>\r\n                    })\r\n                }\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n\r\n}\r\n\r\nexport default memo(PreviewPage);","import React, { Fragment, memo, useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppBar, Tabs, Tab } from '@material-ui/core';\r\nimport { changeTabIndex } from '../actions';\r\nimport FormPage from './form-page';\r\nimport PreviewPage from './preview-page';\r\n\r\nconst App = () => {\r\n    const curTabIndex = useSelector(state => state.curTabIndex);\r\n    const dispatch = useDispatch();\r\n\r\n    const onTabChange = useCallback((event, newTabIndex) => {\r\n        dispatch(changeTabIndex(newTabIndex));\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Fragment>\r\n            <AppBar position=\"static\">\r\n                <Tabs value={curTabIndex} onChange={onTabChange} centered>\r\n                    <Tab label=\"Форма\" />\r\n                    <Tab label=\"Превью\" />\r\n                </Tabs>\r\n            </AppBar>\r\n            <TabPanel value={curTabIndex} index={0}>\r\n                <FormPage />\r\n            </TabPanel>\r\n            <TabPanel value={curTabIndex} index={1}>\r\n                <PreviewPage />\r\n            </TabPanel>\r\n        </Fragment>\r\n    );\r\n}\r\n\r\nconst TabPanel = ({ children, value, index }) => {\r\n    return <div hidden={value !== index}>{children}</div>;\r\n}\r\n\r\nexport default memo(App);\r\n","import React, { Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { CssBaseline, Container } from '@material-ui/core';\nimport store from './store';\nimport App from './components/app';\n\nReactDOM.render(\n\t<Fragment>\n\t\t<CssBaseline />\n\t\t<Container maxWidth='sm'>\n\t\t\t<Provider store={store}>\n\t\t\t\t<App />\n\t\t\t</Provider>\n\t\t</Container>\n\t</Fragment>\n\t, document.getElementById('root')\n);\n\n"],"sourceRoot":""}